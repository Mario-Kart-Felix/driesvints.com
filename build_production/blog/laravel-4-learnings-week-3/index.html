<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <!-- Site info -->
    <title>Laravel 4 learnings: week 3 | Dries Vints</title>

    
            <meta property="article:published_time" content="2013-03-31T14:17" />
    
    <!-- Favicons -->
    <meta name="msapplication-TileColor" content="#2F3238">
    <meta name="msapplication-TileImage" content="/assets/images/favicons/touch-icon-144×144-precomposed.png'">
    <link rel="apple-touch-icon-precomposed" sizes="152×152" href="/assets/images/favicons/touch-icon-152×152-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144×144" href="/assets/images/favicons/touch-icon-144×144-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120×120" href="/assets/images/favicons/touch-icon-120×120-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114×114" href="/assets/images/favicons/touch-icon-114×114-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72×72" href="/assets/images/touch-icon-72×72-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" href="/assets/images/favicons/touch-icon-iphone-precomposed.png" />
    <link rel="icon" sizes="32x32" href="/assets/images/favicons/favicon-32.png">
    <link rel="shortcut icon" href="/favicon.ico">

    <!-- Stylsheets -->
    <link media="all" type="text/css" rel="stylesheet" href='//fonts.googleapis.com/css?family=Lato:100,300,400,700,900,100italic,300italic,400italic,700italic,900italic|Source+Code+Pro:400,700'>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link rel="stylesheet" href="/assets/build/css/main.css?id=142ddf01d535aa1f938e">

            <!-- Google Analytics -->
        <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-18478762-2']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
    </head>
<body>
        <div id="content">
        <h1>Laravel 4 learnings: week 3</h1>

        <p>It's been a great week for Laravel 4 with <a href="https://github.com/laravel/framework/tree/v4.0.0-BETA4">beta 4</a> hot off the press and lots of new functionality added to the framework. I'll go over some of the new functionality as well as the weekly list of tips, tweets and resources that were posted.<!--more--></p>
<p><a href="https://twitter.com/laravelphp/status/317671374762156032">https://twitter.com/laravelphp/status/317671374762156032</a></p>
<h2>Go vote for Laravel at the .net awards!</h2>
<p>Laravel has been selected as for the .net awards 2013 under the category &quot;Open Source project of the year&quot;. <a href="http://www.thenetawards.com/">Go vote for Laravel</a>! It doesn't requires you to subscribe to anything or give any personal info.</p>
<h2>Cartalyst will donate 1% of its proceeds to Laravel</h2>
<p>A really nice gesture by Cartalyst. <a href="http://blog.cartalyst.com/post/46425201351/building-a-stronger-community">Cartalyst will donate 1% of its income to Laravel</a>. They want to thank Laravel and Taylor in that way for everything Laravel has provided for building their service. This will really help Laravel and Taylor to continue doing his awesome work for the Laravel framework and community.</p>
<p><a href="https://twitter.com/Cartalyst/status/316940582356402176">https://twitter.com/Cartalyst/status/316940582356402176</a></p>
<p>Of course you can donate as well. All bits help and if Laravel has helped you a lot on your projects go ahead and <a href="http://laravel.com/about#donations">give something back</a>! :)</p>
<h2>Laravel Q&amp;A stackexchange site</h2>
<p>We're trying to get a separate Q&amp;A site for Laravel on the Stack Exchange network. Go see how you can help <a href="http://area51.stackexchange.com/proposals/46607/laravel?referrer=AgG4EvnCx9m753uZWv1VMg2#.UVMgw5DgLGQ.twitter">here</a>.</p>
<p><a href="https://twitter.com/niall_obrien/status/316952716591108096">https://twitter.com/niall_obrien/status/316952716591108096</a></p>
<h2>Laravel Screencasts</h2>
<p>Maksim Surguy built a website which contains a list of Laravel screencasts that came out so far. If you want to learn more about Laravel, you'll have several hours to view some awesome videos on this website. <a href="http://laracasts.com/">Go check it out!</a></p>
<p><a href="https://twitter.com/msurguy/status/318130652220375040">https://twitter.com/msurguy/status/318130652220375040</a></p>
<h2>Model Events</h2>
<p>Just added in beta 4, Model events provide a nice way to hooking into frequent Model methods, f.e. saving a model to a database or deleting one. It gives you a way to prevent a model, for example, from being deleted when it's still in use by another model or from being created if some of the model properties have invalid or missing values. These are just 2 examples of many use cases for which model events can be used.</p>
<p>You can find the full list of events in <a href="http://four.laravel.com/docs/eloquent#model-events">the docs</a>. I'm actually preparing a separate blog post about them so stay tuned next week for that :)</p>
<h2>Artisan Routes Command</h2>
<p>Jeffrey Way's nice &quot;routes&quot; command was added to the Laravel 4 core. A nice way to get an overview of all your app's routes and their actions.</p>
<p><a href="https://twitter.com/laravelphp/status/316574137676070913">https://twitter.com/laravelphp/status/316574137676070913</a></p>
<h2>Artisan dump-autoload Command</h2>
<p>You probably already knew about <code>composer dump-autoload</code>. Laravel has added the same command to Artisan that's optimised for your App and workbenches. Especially useful if you're developing packages.</p>
<p>Run with:</p>
<pre><code class="language-bash">$ php artisan dump-autoload</code></pre>
<h2>Touching Parent Timestamps</h2>
<p>A nice addition to Eloquent Models is the ability to touch parent timestamps. Say you have a relation <code>belongTo()</code> on a model. If you include a property <code>$touches</code> with an array with a value of the parent Model name, the updated_at column will be updated whenever the child Model gets updated. <a href="http://four.laravel.com/docs/eloquent#touching-parent-timestamps">Check out the docs</a> for detailed info.</p>
<h2>Wildcard Urls</h2>
<p>Not a beta 4 feature but something previous Laravel versions already supported. The syntax changed a bit for Laravel 4. If you're building a CMS, for example, this can be a handy feature.</p>
<p>Say you have a post model which has a url property which is a unique index in the database. You want to show the post when that url parameter has been provided. You can set your route up as follows:</p>
<pre><code class="language-php">Route::get('{param}', function($param)
{
    // Search for url on post model.
    if  ($post = Post::where('url', $param)-&gt;first())
    {
        // Build model view.
        return View::make('post', compact('post'));
    }

    // Throw a 404 if model wasn't found.
    App::abort(404).
});</code></pre>
<p>Whenever you type anything behind the root url, the route closure will search for a post model by its url. If it's found, the post view will be build. Something you need to make sure of is that you place this wildcard route <strong>at the end of your routes file</strong>. Otherwise it will override any other routes you set after them. First register your &quot;fixed&quot; routes and route groups and place your wildcard route at the end.</p>
<p>Btw, <a href="http://be2.php.net/manual/en/function.compact.php">the compact function</a> in the code above, if you don't know it, just creates an array with all the variables you provide with their names as array keys.</p>
<p>You can of course search for multiple wildcard parameters.</p>
<pre><code class="language-php">Route::get('{param}/{param2?}', function($param, $param2 = null)
{
    // Filter on one or both parameters.
});</code></pre>
<p>Now you can search for the first parameter and optionally for a second one if it's present. The ? character at the end of the second parameter means it's optional. This is a nice way to deal with nested page models.</p>
<h2>with Helper Method</h2>
<p>I know, I'm only documenting a single helper function here but it's such a neat and handy function that I <em>had</em> to show it :)</p>
<p>I think a lot of developers know it's sometimes a bit annoying to first instantiate a new class before you can call a certain function which isn't a static function. You probably have been doing this before:</p>
<pre><code class="language-php">// Instantiate new object.
$post = new Post;
// Call non-static function on that model.
$postTypes = $post-&gt;getPostTypes();</code></pre>
<p>The with() helper function makes this a little easier.</p>
<pre><code class="language-php">$postTypes = with(new Post)-&gt;getPostTypes();</code></pre>
<p>Basically the with function just returns the object that's being passed along. It's a function to help you chain object methods from the start so you don't need to create a new variable for the object.</p>
<h2>Resources</h2>
<ul>
<li><a href="http://maxoffsky.com/code-blog/howto-ajax-multiple-file-upload-in-laravel/">Howto : AJAX multiple file upload in Laravel</a> by <a href="https://twitter.com/msurguy">Maksim Surguy</a></li>
<li><a href="https://gist.github.com/ziadoz/1677679">Incredible large PHP resources list</a> by <a href="https://twitter.com/jamieyork">Jamie York</a></li>
<li><a href="https://tutsplus.com/lesson/sending-mail-with-postmark/">Sending mail with Postmark</a> by <a href="https://twitter.com/jeffrey_way">Jeffrey Way</a></li>
<li><a href="http://davidheward.com/2013/03/install-laravel-with-symlink-through-terminal-shell-functioncommand-mamp/">Install Laravel with symlink through terminal shell function/command mamp</a> by <a href="https://twitter.com/daveheward">David Heward</a></li>
<li><a href="http://insanemission.com/post/46285751294/i-didnt-want-to-be-the-ideas-person-any-more">I didn’t want to be the ideas person any more</a> by <a href="https://twitter.com/adamontherun">Adam Smith</a></li>
<li><a href="http://toddish.co.uk/blog/creating-a-custom-laravel-4-auth-driver/">Creating a Custom Laravel 4 Auth Driver</a> by <a href="https://twitter.com/Toddish">Todd Francis</a></li>
<li><a href="https://github.com/Aboalarm/devbox">Vagrant development machine provisioned and configured for PHP and Larave</a>l by <a href="https://twitter.com/stefanneubig">Stefan Neubig</a></li>
<li><a href="http://fideloper.com/laravel4-etag-concurrency-control">ETags and Concurrency Control in Laravel 4</a> by <a href="https://twitter.com/fideloper">Chris Fidao</a></li>
<li><a href="http://webuildatnight.com/features/Laravel">An interview with Taylor Otwell</a> by <a href="http://webuildatnight.com/">We Build At Night</a></li>
</ul>
<h2>Packages</h2>
<ul>
<li><a href="http://forums.laravel.io/viewtopic.php?pid=32702#p32702">API package for Cartalyst</a></li>
<li><a href="http://docs.toddish.co.uk/verify-l4/">Laravel 4 Auth package</a> by <a href="https://twitter.com/Toddish">Todd Francis</a></li>
<li><a href="http://www.chrisduell.com/blog/development/keeping-revisions-of-your-laravel-model-data/">Keeping revisions of your laravel model data</a> by <a href="https://twitter.com/duellsy">Chris Duell</a></li>
</ul>
<h2>Thanks!</h2>
<p>Thanks again for reading. If you have something about Laravel 4 out next week, wether it's a blog post, package or something else, let me know and I'll include it in next week's post :)</p>    </div>
    <script src="/assets/build/js/highlighting.js?id=c34e12c2668266d9c631"></script>
</body>
</html>
